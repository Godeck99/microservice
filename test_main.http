#!/bin/bash

# Check if word file is provided
if [ $# -eq 0 ]; then
    echo "Usage: $0 <word_file> <search_directory>"
    exit 1
fi

word_file="$1"
search_dir="$2"

# Check if word file exists
if [ ! -f "$word_file" ]; then
    echo "Word file not found: $word_file"
    exit 1
fi

# Check if search directory exists
if [ ! -d "$search_dir" ]; then
    echo "Search directory not found: $search_dir"
    exit 1
fi

# Initialize an associative array to store results
declare -A results

# Read words from the file
while IFS= read -r word; do
    # Use grep to search for the word in files
    found=$(grep -r -l "$word" "$search_dir")
    
    # If the word is found, add it to the results
    if [ -n "$found" ]; then
        results["$word"]="$found"
    fi
done < "$word_file"

# Check if any words were found
if [ ${#results[@]} -eq 0 ]; then
    echo "No words from $word_file were found in the files under $search_dir"
    exit 0
else
    echo "The following words were found:"
    for word in "${!results[@]}"; do
        echo "Word '$word' found in:"
        echo "${results[$word]}"
        echo "---"
    done
    exit 1
fi